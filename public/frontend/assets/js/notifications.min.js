/*! Notifications & Utilities - Production Optimized */
function getThemeColor(variable){return getComputedStyle(document.documentElement).getPropertyValue(variable).trim()}toastr.options={closeButton:true,debug:false,newestOnTop:true,progressBar:true,positionClass:"toast-top-right",preventDuplicates:false,onclick:null,showDuration:"400",hideDuration:"300",timeOut:"5000",extendedTimeOut:"1000",showEasing:"cubic-bezier(0.68, -0.55, 0.265, 1.55)",hideEasing:"cubic-bezier(0.68, -0.55, 0.265, 1.55)",showMethod:"slideIn",hideMethod:"slideOut",onHidden:function(){$(this).remove();if($('#toast-container').children().length===0){$('#toast-container').remove()}},onCloseClick:function(){$(this).fadeOut(300,function(){$(this).remove();if($('#toast-container').children().length===0){$('#toast-container').remove()}})}};function showSuccess(message,title='Success'){if(typeof Swal!=='undefined'){return Swal.fire({icon:'success',title:title,text:message,position:'top-end',showConfirmButton:false,timer:3000,timerProgressBar:true,toast:true,background:getThemeColor('--card-bg'),color:getThemeColor('--text-primary'),allowOutsideClick:true,allowEscapeKey:true,customClass:{popup:'swal2-toast-theme',title:'swal2-title-theme',content:'swal2-content-theme'},didClose:()=>{cleanupSwal()}})}else{toastr.success(message,title)}}function showError(message,title='Error'){if(typeof Swal!=='undefined'){return Swal.fire({icon:'error',title:title,text:message,position:'top-end',showConfirmButton:false,timer:4000,timerProgressBar:true,toast:true,background:getThemeColor('--card-bg'),color:getThemeColor('--text-primary'),allowOutsideClick:true,allowEscapeKey:true,customClass:{popup:'swal2-toast-theme',title:'swal2-title-theme',content:'swal2-content-theme'},didClose:()=>{cleanupSwal()}})}else{toastr.error(message,title)}}function showWarning(message,title='Warning'){if(typeof Swal!=='undefined'){return Swal.fire({icon:'warning',title:title,text:message,position:'top-end',showConfirmButton:false,timer:3500,timerProgressBar:true,toast:true,background:getThemeColor('--card-bg'),color:getThemeColor('--text-primary'),allowOutsideClick:true,allowEscapeKey:true,customClass:{popup:'swal2-toast-theme',title:'swal2-title-theme',content:'swal2-content-theme'},didClose:()=>{cleanupSwal()}})}else{toastr.warning(message,title)}}function showInfo(message,title='Info'){if(typeof Swal!=='undefined'){return Swal.fire({icon:'info',title:title,text:message,position:'top-end',showConfirmButton:false,timer:3000,timerProgressBar:true,toast:true,background:getThemeColor('--card-bg'),color:getThemeColor('--text-primary'),allowOutsideClick:true,allowEscapeKey:true,customClass:{popup:'swal2-toast-theme',title:'swal2-title-theme',content:'swal2-content-theme'},didClose:()=>{cleanupSwal()}})}else{toastr.info(message,title)}}function copyToClipboard(text,buttonIdOrElement){let btn=null;if(typeof buttonIdOrElement==='string'){btn=document.getElementById(buttonIdOrElement)}else if(buttonIdOrElement&&buttonIdOrElement.nodeType===1){btn=buttonIdOrElement}const textarea=document.createElement('textarea');textarea.value=text;textarea.style.position='fixed';textarea.style.opacity='0';document.body.appendChild(textarea);textarea.select();textarea.setSelectionRange(0,99999);try{const successful=document.execCommand('copy');document.body.removeChild(textarea);if(successful){if(btn){const icon=btn.querySelector('i');if(icon){const originalClass=icon.className;const originalTitle=btn.getAttribute('title')||'';icon.className='fas fa-check';btn.style.background='#10b981';if(btn.style.color){btn.style.color='#fff'}btn.setAttribute('title','Copied!');setTimeout(()=>{icon.className=originalClass;btn.style.background='var(--accent, #ffb11a)';if(btn.style.color){btn.style.color='#000'}btn.setAttribute('title',originalTitle)},2000)}else{const originalHTML=btn.innerHTML;btn.innerHTML='<i class="fas fa-check"></i>';btn.style.background='#10b981';setTimeout(()=>{btn.innerHTML=originalHTML;btn.style.background='var(--accent, #ffb11a)'},2000)}}else{if(btn){btn.style.background='#ef4444';setTimeout(()=>{btn.style.background='var(--accent, #ffb11a)'},2000)}}}catch(err){document.body.removeChild(textarea);if(navigator.clipboard&&navigator.clipboard.writeText){navigator.clipboard.writeText(text).then(()=>{if(btn){const icon=btn.querySelector('i');if(icon){const originalClass=icon.className;const originalTitle=btn.getAttribute('title')||'';icon.className='fas fa-check';btn.style.background='#10b981';if(btn.style.color){btn.style.color='#fff'}btn.setAttribute('title','Copied!');setTimeout(()=>{icon.className=originalClass;btn.style.background='var(--accent, #ffb11a)';if(btn.style.color){btn.style.color='#000'}btn.setAttribute('title',originalTitle)},2000)}else{const originalHTML=btn.innerHTML;btn.innerHTML='<i class="fas fa-check"></i>';btn.style.background='#10b981';setTimeout(()=>{btn.innerHTML=originalHTML;btn.style.background='var(--accent, #ffb11a)'},2000)}}}).catch(()=>{if(btn){btn.style.background='#ef4444';setTimeout(()=>{btn.style.background='var(--accent, #ffb11a)'},2000)}})}else{if(btn){btn.style.background='#ef4444';setTimeout(()=>{btn.style.background='var(--accent, #ffb11a)'},2000)}}}}function showConfirm(message,title='Confirm',confirmText='Yes',cancelText='No'){return Swal.fire({title:title,text:message,icon:'question',showCancelButton:true,confirmButtonColor:getThemeColor('--accent'),cancelButtonColor:getThemeColor('--secondary'),confirmButtonText:confirmText,cancelButtonText:cancelText,background:getThemeColor('--card-bg'),color:getThemeColor('--text-primary'),customClass:{popup:'swal2-theme',title:'swal2-title-theme',content:'swal2-content-theme'},didClose:()=>{document.body.style.overflow='';document.body.style.paddingRight='';document.documentElement.style.overflow='';const containers=document.querySelectorAll('.swal2-container');containers.forEach(container=>{container.remove()});const backdrops=document.querySelectorAll('.swal2-backdrop-show');backdrops.forEach(backdrop=>{backdrop.remove()})}})}function cleanupSwal(){document.body.style.overflow='';document.body.style.paddingRight='';document.documentElement.style.overflow='';const containers=document.querySelectorAll('.swal2-container');containers.forEach(container=>{container.remove()});const backdrops=document.querySelectorAll('.swal2-backdrop-show');backdrops.forEach(backdrop=>{backdrop.remove()})}document.addEventListener('DOMContentLoaded',function(){const logoutForms=document.querySelectorAll('form[action*="logout"]');logoutForms.forEach(function(form){form.addEventListener('submit',function(e){e.preventDefault();if(typeof Swal!=='undefined'){Swal.fire({title:'Are you sure?',text:'Do you want to logout?',icon:'question',showCancelButton:true,confirmButtonColor:'#667eea',cancelButtonColor:'#6c757d',confirmButtonText:'Yes, Logout',cancelButtonText:'Cancel',reverseButtons:true,customClass:{popup:'swal2-theme',title:'swal2-title-theme',content:'swal2-content-theme'}}).then((result)=>{if(result.isConfirmed){if(typeof showInfo!=='undefined'){showInfo('Logging out...','Logout')}else if(typeof toastr!=='undefined'){toastr.info('Logging out...','Logout')}setTimeout(function(){form.submit()},300)}})}else{if(confirm('Are you sure you want to logout?')){form.submit()}}})})});if(typeof Swal!=='undefined'){const originalFire=Swal.fire;Swal.fire=function(options){const result=originalFire.call(this,options);if(result&&typeof result.then==='function'){result.then(()=>{setTimeout(()=>{cleanupSwal()},100)}).catch(()=>{setTimeout(()=>{cleanupSwal()},100)})}return result};const observer=new MutationObserver(function(mutations){const hasSwal=document.querySelector('.swal2-container');if(!hasSwal){cleanupSwal()}});observer.observe(document.body,{childList:true,subtree:true});setInterval(function(){const hasSwal=document.querySelector('.swal2-container.swal2-backdrop-show');if(!hasSwal){const bodyOverflow=window.getComputedStyle(document.body).overflow;if(bodyOverflow==='hidden'){cleanupSwal()}}},500)}document.addEventListener('visibilitychange',function(){if(!document.hidden){cleanupSwal()}});window.addEventListener('beforeunload',function(){cleanupSwal()});

